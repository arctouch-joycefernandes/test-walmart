{"version":3,"sources":["../../src/commands/takeScreenshot.js"],"names":["TakeScreenshot","nightwatch","customizedSettings","BaseCommand","call","cmd","util","inherits","prototype","injectedJsCommand","$el","command","title","cb","successMessage","failureMessage","filename","filepath","settings","screenshotPath","path","sep","self","startTime","Date","getTime","client","api","saveScreenshot","apply","pass","actual","module","exports"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,iBAAiB,SAAjBA,cAAiB,GAAwD;AAAA,MAA9CC,UAA8C,uEAAjC,IAAiC;AAAA,MAA3BC,kBAA2B,uEAAN,IAAM;;AAC7EC,wBAAYC,IAAZ,CAAiB,IAAjB,EAAuBH,UAAvB,EAAmCC,kBAAnC;AACA,OAAKG,GAAL,GAAW,gBAAX;AACD,CAHD;;AAKAC,eAAKC,QAAL,CAAcP,cAAd,EAA8BG,qBAA9B;;AAEA;AACAH,eAAeQ,SAAf,CAAyBC,iBAAzB,GAA6C,UAAUC,GAAV,EAAe;AAC1D,SAAO,uBAAP;AACD,CAFD;;AAIAV,eAAeQ,SAAf,CAAyBG,OAAzB,GAAmC,UAAUC,KAAV,EAAiBC,EAAjB,EAAqB;AACtD,OAAKA,EAAL,GAAUA,EAAV;;AAEA,OAAKC,cAAL,GAAsB,0CAAtB;AACA,OAAKC,cAAL,GAAsB,oDAAtB;;AAEA,MAAMC,WAAc,gCAAiBJ,KAAjB,CAAd,SAAN;AACA,MAAMK,WAAWC,mBAASC,cAAT,GAA0BC,eAAKC,GAA/B,GAAqCL,QAAtD;AACA,MAAMM,OAAO,IAAb;;AAEA,OAAKC,SAAL,GAAkB,IAAIC,IAAJ,EAAD,CAAaC,OAAb,EAAjB;;AAEA,OAAKC,MAAL,CAAYC,GAAZ,CACGC,cADH,CACkBX,QADlB,EAC4B,YAAM;AAC9B,QAAIK,KAAKT,EAAT,EAAa;AACXS,WAAKT,EAAL,CAAQgB,KAAR,CAAcP,KAAKI,MAAL,CAAYC,GAA1B,EAA+B,EAA/B;AACD;AACDL,SAAKQ,IAAL,CAAU,EAAEC,QAAQ,iBAAV,EAAV;AACD,GANH;;AAQA,SAAO,IAAP;AACD,CArBD;;AAuBAC,OAAOC,OAAP,GAAiBjC,cAAjB","file":"takeScreenshot.js","sourcesContent":["import util from \"util\";\nimport path from \"path\";\nimport sanitizeFilename from \"sanitize-filename\";\n\nimport selectorUtil from \"../util/selector\";\nimport BaseCommand from \"../base-command\";\nimport settings from \"../settings\";\n\nconst TakeScreenshot = function (nightwatch = null, customizedSettings = null) {\n  BaseCommand.call(this, nightwatch, customizedSettings);\n  this.cmd = \"takescreenshot\";\n};\n\nutil.inherits(TakeScreenshot, BaseCommand);\n\n/*eslint no-unused-vars:0 */\nTakeScreenshot.prototype.injectedJsCommand = function ($el) {\n  return \"return $el.length > 0\";\n};\n\nTakeScreenshot.prototype.command = function (title, cb) {\n  this.cb = cb;\n\n  this.successMessage = \"Took a screenshot after %d milliseconds.\";\n  this.failureMessage = \"Failed to take a screenshot after %d milliseconds.\";\n\n  const filename = `${sanitizeFilename(title)}.png`;\n  const filepath = settings.screenshotPath + path.sep + filename;\n  const self = this;\n\n  this.startTime = (new Date()).getTime();\n\n  this.client.api\n    .saveScreenshot(filepath, () => {\n      if (self.cb) {\n        self.cb.apply(self.client.api, []);\n      }\n      self.pass({ actual: \"save screenshot\" });\n    });\n\n  return this;\n};\n\nmodule.exports = TakeScreenshot;\n"]}