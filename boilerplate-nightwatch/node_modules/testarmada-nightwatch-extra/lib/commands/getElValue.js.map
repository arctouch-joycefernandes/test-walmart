{"version":3,"sources":["../../src/commands/getElValue.js"],"names":["GetElValue","nightwatch","customizedSettings","BaseCommand","call","cmd","util","inherits","prototype","do","value","pass","actual","injectedJsCommand","$el","sizzle","time","totalTime","Date","getTime","startTime","client","assertion","format","successMessage","capabilities","options","desiredCapabilities","type","cb","apply","api","selector","emit","command","selectorUtil","normalize","failureMessage","seenCount","decide","checkConditions","module","exports"],"mappings":";;AAAA;;;;AAEA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,aAAa,SAAbA,UAAa,GAAwD;AAAA,MAA9CC,UAA8C,uEAAjC,IAAiC;AAAA,MAA3BC,kBAA2B,uEAAN,IAAM;;AACzEC,wBAAYC,IAAZ,CAAiB,IAAjB,EAAuBH,UAAvB,EAAmCC,kBAAnC;AACA,OAAKG,GAAL,GAAW,YAAX;AACD,CAHD;;AAKAC,eAAKC,QAAL,CAAcP,UAAd,EAA0BG,qBAA1B;;AAEAH,WAAWQ,SAAX,CAAqBC,EAArB,GAA0B,UAAUC,KAAV,EAAiB;AACzC,OAAKC,IAAL,CAAU,EAAEC,QAAQF,KAAV,EAAV;AACD,CAFD;;AAIA;AACAV,WAAWQ,SAAX,CAAqBK,iBAArB,GAAyC,UAAUC,GAAV,EAAeC,MAAf,EAAuB;AAC9D,SAAO,4BAAP;AACD,CAFD;;AAIAf,WAAWQ,SAAX,CAAqBG,IAArB,GAA4B,UAAUC,MAAV,EAAkB;AAC5C,OAAKI,IAAL,CAAUC,SAAV,GAAuB,IAAIC,IAAJ,EAAD,CAAaC,OAAb,KAAyB,KAAKC,SAApD;AACA,OAAKC,MAAL,CAAYC,SAAZ,CAAsB,IAAtB,EAA4BV,MAA5B,EAAoCA,MAApC,EACEN,eAAKiB,MAAL,CAAY,KAAKC,cAAjB,EAAiC,KAAKR,IAAL,CAAUC,SAA3C,CADF,EACyD,IADzD;;AAGA,uBAAM;AACJQ,kBAAc,KAAKJ,MAAL,CAAYK,OAAZ,CAAoBC,mBAD9B;AAEJC,UAAM,SAFF;AAGJvB,SAAK,KAAKA,GAHN;AAIJK,WAAO,KAAKM;AAJR,GAAN;;AAOA,MAAI,KAAKa,EAAT,EAAa;AACX,SAAKA,EAAL,CAAQC,KAAR,CAAc,KAAKT,MAAL,CAAYU,GAA1B,EAA+B,CAACnB,MAAD,EAAS,KAAKoB,QAAd,CAA/B;AACD;AACD,OAAKC,IAAL,CAAU,UAAV;AACD,CAhBD;;AAkBAjC,WAAWQ,SAAX,CAAqB0B,OAArB,GAA+B,UAAUF,QAAV,EAAoBH,EAApB,EAAwB;AACrD,OAAKG,QAAL,GAAgBG,mBAAaC,SAAb,CAAuBJ,QAAvB,CAAhB;AACA,OAAKH,EAAL,GAAUA,EAAV;;AAEA,OAAKL,cAAL,kBAAmC,KAAKQ,QAAxC;AACA,OAAKK,cAAL,kBAAmC,KAAKL,QAAxC;;AAEA,OAAKZ,SAAL,GAAkB,IAAIF,IAAJ,EAAD,CAAaC,OAAb,EAAjB;;AAEA;AACA,OAAKmB,SAAL,GAAiB,CAAjB;AACA,OAAKC,MAAL;AACA,OAAKC,eAAL;;AAEA,SAAO,IAAP;AACD,CAfD;;AAiBAC,OAAOC,OAAP,GAAiB1C,UAAjB","file":"getElValue.js","sourcesContent":["import util from \"util\";\n\nimport selectorUtil from \"../util/selector\";\nimport BaseCommand from \"../base-command\";\nimport stats from \"../util/stats\";\n\nconst GetElValue = function (nightwatch = null, customizedSettings = null) {\n  BaseCommand.call(this, nightwatch, customizedSettings);\n  this.cmd = \"getelvalue\";\n};\n\nutil.inherits(GetElValue, BaseCommand);\n\nGetElValue.prototype.do = function (value) {\n  this.pass({ actual: value });\n};\n\n/*eslint no-unused-vars:0 */\nGetElValue.prototype.injectedJsCommand = function ($el, sizzle) {\n  return \"return sizzle.getText($el)\";\n};\n\nGetElValue.prototype.pass = function (actual) {\n  this.time.totalTime = (new Date()).getTime() - this.startTime;\n  this.client.assertion(true, actual, actual,\n    util.format(this.successMessage, this.time.totalTime), true);\n\n  stats({\n    capabilities: this.client.options.desiredCapabilities,\n    type: \"command\",\n    cmd: this.cmd,\n    value: this.time\n  });\n\n  if (this.cb) {\n    this.cb.apply(this.client.api, [actual, this.selector]);\n  }\n  this.emit(\"complete\");\n};\n\nGetElValue.prototype.command = function (selector, cb) {\n  this.selector = selectorUtil.normalize(selector);\n  this.cb = cb;\n\n  this.successMessage = `Selector '${this.selector}' was visible after %d milliseconds.`;\n  this.failureMessage = `Selector '${this.selector}' was not visible after %d milliseconds.`;\n\n  this.startTime = (new Date()).getTime();\n\n  // Track how many times we've seen selector as :visible\n  this.seenCount = 0;\n  this.decide();\n  this.checkConditions();\n\n  return this;\n};\n\nmodule.exports = GetElValue;\n"]}