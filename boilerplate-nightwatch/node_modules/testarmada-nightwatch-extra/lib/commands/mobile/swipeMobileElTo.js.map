{"version":3,"sources":["../../../src/commands/mobile/swipeMobileElTo.js"],"names":["SwipeMobileElTo","nightwatch","BaseCommand","call","cmd","util","inherits","prototype","do","value","self","options","path","client","sessionId","method","data","ELEMENT","x","y","protocol","result","status","pass","actual","fail","code","settings","FAILURE_REASONS","BUILTIN_ELEMENT_NOT_OPERABLE","message","failureMessage","command","using","selector","cb","successMessage","startTime","Date","getTime","seenCount","checkConditions","module","exports"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,kBAAkB,SAAlBA,eAAkB,GAA6B;AAAA,MAAnBC,UAAmB,uEAAN,IAAM;;AACnDC,8BAAYC,IAAZ,CAAiB,IAAjB,EAAuBF,UAAvB;AACA,OAAKG,GAAL,GAAW,iBAAX;AACD,CAHD;;AAKAC,eAAKC,QAAL,CAAcN,eAAd,EAA+BE,2BAA/B;;AAEAF,gBAAgBO,SAAhB,CAA0BC,EAA1B,GAA+B,UAAUC,KAAV,EAAiB;AAC9C,MAAMC,OAAO,IAAb;;AAEA,MAAMC,UAAU;AACdC,wBAAkB,KAAKC,MAAL,CAAYC,SAA9B,mBADc;AAEdC,YAAQ,MAFM;AAGdC,UAAM;AACJ,iBAAW,CACT,EAAE,UAAU,OAAZ,EAAqB,WAAW,EAAE,WAAWP,MAAMQ,OAAnB,EAAhC,EADS,EAET,EAAE,UAAU,MAAZ,EAAoB,WAAW,EAAE,MAAM,GAAR,EAA/B,EAFS,EAGT,EAAE,UAAU,QAAZ,EAAsB,WAAW,EAAE,KAAK,KAAKC,CAAZ,EAAe,KAAK,KAAKC,CAAzB,EAAjC,EAHS,EAIT,EAAE,UAAU,SAAZ,EAAuB,WAAW,EAAlC,EAJS;AADP;AAHQ,GAAhB;;AAYA,OAAKC,QAAL,CAAcT,OAAd,EAAuB,UAACU,MAAD,EAAY;AACjC,QAAIA,OAAOC,MAAP,KAAkB,CAAtB,EAAyB;AACvBZ,WAAKa,IAAL,CAAU;AACRC,gBAAQH,OAAOZ;AADP,OAAV;AAGD,KAJD,MAIO;AACLC,WAAKe,IAAL,CAAU;AACRC,cAAMC,mBAASC,eAAT,CAAyBC,4BADvB;AAERC,iBAASpB,KAAKqB;AAFN,OAAV;AAID;AACF,GAXD;AAYD,CA3BD;;AA6BA;AACA/B,gBAAgBO,SAAhB,CAA0ByB,OAA1B,GAAoC,UAAUC,KAAV,EAAiBC,QAAjB,EAA2BhB,CAA3B,EAA8BC,CAA9B,EAAiCgB,EAAjC,EAAqC;AACvE,OAAKD,QAAL,GAAgBA,QAAhB;AACA,OAAKD,KAAL,GAAaA,KAAb;AACA,OAAKE,EAAL,GAAUA,EAAV;AACA,OAAKjB,CAAL,GAASA,CAAT;AACA,OAAKC,CAAL,GAASA,CAAT;;AAEA,OAAKiB,cAAL,GAAsB,eAAa,KAAKH,KAAlB,SAA2B,KAAKC,QAAhC,qCACMhB,CADN,YACcC,CADd,8BAAtB;AAEA,OAAKY,cAAL,GAAsB,eAAa,KAAKE,KAAlB,SAA2B,KAAKC,QAAhC,uCACQhB,CADR,YACgBC,CADhB,8BAAtB;;AAGA,OAAKkB,SAAL,GAAkB,IAAIC,IAAJ,EAAD,CAAaC,OAAb,EAAjB;;AAEA;AACA,OAAKC,SAAL,GAAiB,CAAjB;AACA,OAAKC,eAAL;;AAEA,SAAO,IAAP;AACD,CAnBD;;AAqBAC,OAAOC,OAAP,GAAiB3C,eAAjB","file":"swipeMobileElTo.js","sourcesContent":["import util from \"util\";\nimport BaseCommand from \"../../base-mobile-command\";\nimport settings from \"../../settings\";\n\nconst SwipeMobileElTo = function (nightwatch = null) {\n  BaseCommand.call(this, nightwatch);\n  this.cmd = \"swipemobileelto\";\n};\n\nutil.inherits(SwipeMobileElTo, BaseCommand);\n\nSwipeMobileElTo.prototype.do = function (value) {\n  const self = this;\n\n  const options = {\n    path: `/session/${this.client.sessionId}/touch/perform`,\n    method: \"POST\",\n    data: {\n      \"actions\": [\n        { \"action\": \"press\", \"options\": { \"element\": value.ELEMENT } },\n        { \"action\": \"wait\", \"options\": { \"ms\": 800 } },\n        { \"action\": \"moveTo\", \"options\": { \"x\": this.x, \"y\": this.y } },\n        { \"action\": \"release\", \"options\": {} }]\n    }\n  };\n\n  this.protocol(options, (result) => {\n    if (result.status === 0) {\n      self.pass({\n        actual: result.value\n      });\n    } else {\n      self.fail({\n        code: settings.FAILURE_REASONS.BUILTIN_ELEMENT_NOT_OPERABLE,\n        message: self.failureMessage\n      });\n    }\n  });\n};\n\n/*eslint max-params:[\"error\", 5] */\nSwipeMobileElTo.prototype.command = function (using, selector, x, y, cb) {\n  this.selector = selector;\n  this.using = using;\n  this.cb = cb;\n  this.x = x;\n  this.y = y;\n\n  this.successMessage = `Selector '${this.using}:${this.selector}' `\n    + `was swiped toward {x:${x}, y:${y}} after %d milliseconds.`;\n  this.failureMessage = `Selector '${this.using}:${this.selector}' `\n    + `was't swiped toward {x:${x}, y:${y}} after %d milliseconds.`;\n\n  this.startTime = (new Date()).getTime();\n\n  // Track how many times selector is successfully checked by /element protocol\n  this.seenCount = 0;\n  this.checkConditions();\n\n  return this;\n};\n\nmodule.exports = SwipeMobileElTo;\n"]}