{"version":3,"sources":["../../../src/commands/mobile/swipeScreenTo.js"],"names":["SwipeScreenTo","nightwatch","BaseCommand","call","cmd","util","inherits","prototype","do","self","options","path","client","sessionId","method","data","fx","fy","tx","ty","protocol","result","status","pass","actual","value","fail","code","settings","FAILURE_REASONS","BUILTIN_ELEMENT_NOT_OPERABLE","message","failureMessage","command","cb","successMessage","startTime","Date","getTime","seenCount","module","exports"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,gBAAgB,SAAhBA,aAAgB,GAA6B;AAAA,MAAnBC,UAAmB,uEAAN,IAAM;;AACjDC,8BAAYC,IAAZ,CAAiB,IAAjB,EAAuBF,UAAvB;AACA,OAAKG,GAAL,GAAW,eAAX;AACD,CAHD;;AAKAC,eAAKC,QAAL,CAAcN,aAAd,EAA6BE,2BAA7B;;AAEAF,cAAcO,SAAd,CAAwBC,EAAxB,GAA6B,YAAY;AACvC,MAAMC,OAAO,IAAb;;AAEA,MAAMC,UAAU;AACdC,wBAAkB,KAAKC,MAAL,CAAYC,SAA9B,mBADc;AAEdC,YAAQ,MAFM;AAGdC,UAAM;AACJ,iBAAW,CACT,EAAE,UAAU,OAAZ,EAAqB,WAAW,EAAE,KAAK,KAAKC,EAAZ,EAAgB,KAAK,KAAKC,EAA1B,EAAhC,EADS,EAET,EAAE,UAAU,MAAZ,EAAoB,WAAW,EAAE,MAAM,GAAR,EAA/B,EAFS,EAGT,EAAE,UAAU,QAAZ,EAAsB,WAAW,EAAE,KAAK,KAAKC,EAAZ,EAAgB,KAAK,KAAKC,EAA1B,EAAjC,EAHS,EAIT,EAAE,UAAU,SAAZ,EAAuB,WAAW,EAAlC,EAJS;AADP;AAHQ,GAAhB;;AAYA,OAAKC,QAAL,CAAcV,OAAd,EAAuB,UAACW,MAAD,EAAY;AACjC,QAAIA,OAAOC,MAAP,KAAkB,CAAtB,EAAyB;AACvBb,WAAKc,IAAL,CAAU,EAAEC,QAAQH,OAAOI,KAAjB,EAAV;AACD,KAFD,MAEO;AACLhB,WAAKiB,IAAL,CAAU;AACRC,cAAMC,mBAASC,eAAT,CAAyBC,4BADvB;AAERC,iBAAStB,KAAKuB;AAFN,OAAV;AAID;AACF,GATD;AAUD,CAzBD;;AA2BA;AACAhC,cAAcO,SAAd,CAAwB0B,OAAxB,GAAkC,UAAUjB,EAAV,EAAcC,EAAd,EAAkBC,EAAlB,EAAsBC,EAAtB,EAA0Be,EAA1B,EAA8B;AAC9D,OAAKlB,EAAL,GAAUA,EAAV;AACA,OAAKC,EAAL,GAAUA,EAAV;AACA,OAAKC,EAAL,GAAUA,EAAV;AACA,OAAKC,EAAL,GAAUA,EAAV;AACA,OAAKe,EAAL,GAAUA,EAAV;;AAEA,OAAKC,cAAL,GAAsB,+BAA6BnB,EAA7B,YAAsCC,EAAtC,2BACJC,EADI,YACKC,EADL,8BAAtB;AAEA,OAAKa,cAAL,GAAsB,kCAAgChB,EAAhC,YAAyCC,EAAzC,2BACJC,EADI,YACKC,EADL,8BAAtB;;AAGA,OAAKiB,SAAL,GAAkB,IAAIC,IAAJ,EAAD,CAAaC,OAAb,EAAjB;;AAEA;AACA,OAAKC,SAAL,GAAiB,CAAjB;AACA,OAAK/B,EAAL;;AAEA,SAAO,IAAP;AACD,CAnBD;;AAqBAgC,OAAOC,OAAP,GAAiBzC,aAAjB","file":"swipeScreenTo.js","sourcesContent":["import util from \"util\";\nimport BaseCommand from \"../../base-mobile-command\";\nimport settings from \"../../settings\";\n\nconst SwipeScreenTo = function (nightwatch = null) {\n  BaseCommand.call(this, nightwatch);\n  this.cmd = \"swipescreento\";\n};\n\nutil.inherits(SwipeScreenTo, BaseCommand);\n\nSwipeScreenTo.prototype.do = function () {\n  const self = this;\n\n  const options = {\n    path: `/session/${this.client.sessionId}/touch/perform`,\n    method: \"POST\",\n    data: {\n      \"actions\": [\n        { \"action\": \"press\", \"options\": { \"x\": this.fx, \"y\": this.fy } },\n        { \"action\": \"wait\", \"options\": { \"ms\": 800 } },\n        { \"action\": \"moveTo\", \"options\": { \"x\": this.tx, \"y\": this.ty } },\n        { \"action\": \"release\", \"options\": {} }]\n    }\n  };\n\n  this.protocol(options, (result) => {\n    if (result.status === 0) {\n      self.pass({ actual: result.value });\n    } else {\n      self.fail({\n        code: settings.FAILURE_REASONS.BUILTIN_ELEMENT_NOT_OPERABLE,\n        message: self.failureMessage\n      });\n    }\n  });\n};\n\n/*eslint max-params:[\"error\", 5] */\nSwipeScreenTo.prototype.command = function (fx, fy, tx, ty, cb) {\n  this.fx = fx;\n  this.fy = fy;\n  this.tx = tx;\n  this.ty = ty;\n  this.cb = cb;\n\n  this.successMessage = `Screen was swiped from {x:${fx}, y:${fy}} `\n    + `towards {x:${tx}, y:${ty}} after %d milliseconds.`;\n  this.failureMessage = `Screen wasn't swiped from {x:${fx}, y:${fy}} `\n    + `towards {x:${tx}, y:${ty}} after %d milliseconds.`;\n\n  this.startTime = (new Date()).getTime();\n\n  // Track how many times selector is successfully checked by /element protocol\n  this.seenCount = 0;\n  this.do();\n\n  return this;\n};\n\nmodule.exports = SwipeScreenTo;\n"]}